(this["webpackJsonpblog-site"]=this["webpackJsonpblog-site"]||[]).push([[0],{14:function(t,e,n){},25:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var s=n(1),c=n(7),o=n.n(c),r=n(5),a=n(2),i=n(4),l=(n(25),n(0)),d=function(t){var e=t.active,n=t.setActive,s=t.children;return Object(l.jsx)("div",{className:e?"modal active":"modal",children:Object(l.jsxs)("div",{className:"modalContent row",onClick:function(t){return t.stopPropagation()},children:[s,Object(l.jsx)("button",{className:"closeModalButton btn btn-secondary closeModalButton",onClick:function(){return n(!1)},children:"Close"})]})})},b=function(t){var e=t.comments;return Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsxs)("div",{className:"card-title",children:["User with nickname: ",Object(l.jsx)("b",{children:e.name})," writes:"]}),Object(l.jsx)("div",{className:"card-title",children:e.body})]})})},u=Object(a.b)((function(t){return{allComments:t.allData.comments,allPosts:t.allData.posts}}))((function(t){var e=t.props,n=t.allComments;t.allPosts;return n.filter((function(t){return t.postId===e})).map((function(t){return Object(l.jsx)(b,{comments:t},t.id)}))})),j=n(13),m=n.n(j),O=n(15),p=n(9),f="ADD_POST",h="CHANGE_ACCESS",x="LOAD_ALL_DATA",v="DELETE_POST",y="REBUILD_STATE",g="SET_SORT_TYPE";function N(t){return function(e){var n=JSON.parse(localStorage.getItem("posts"));n=[t].concat(Object(p.a)(n)),e({type:y,payload:n}),localStorage.setItem("posts",JSON.stringify(n))}}function S(t){return function(e){e({type:v,payload:t}),e({type:v,payload:t})}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:g,payload:t,forIdSort:e}}n(14);var C=Object(a.b)((function(t){return{allComments:t.allData.comments,isAdmin:t.allData.isAdmin}}))((function(t){var e=t.posts,n=t.isAdmin,c=Object(s.useState)(!1),o=Object(i.a)(c,2),r=o[0],b=o[1],j=Object(a.c)(),m=Object(s.useState)(!0),O=Object(i.a)(m,2),p=O[0],f=O[1],h="",x="",v=Object(l.jsxs)("div",{className:"editField",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),"Enter new title:"]}),Object(l.jsx)("input",{className:"inputTitleField",type:"text",onChange:function(t){return h=t.target.value}}),Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),"Enter new post body:"]}),Object(l.jsx)("textarea",{className:"inputEditBodyField",type:"text",onChange:function(t){return x=t.target.value}}),Object(l.jsx)("button",{className:"btn btn-secondary confirmEditButton",onClick:function(){j(S(JSON.parse(localStorage.getItem("currentId")))),j(N({userId:parseInt(e.userId),id:JSON.parse(localStorage.getItem("currentId")),title:h,body:x,numberOfComments:0,numberOfViews:e.numberOfViews})),b(!1),f(!0)},children:"Confirm"})]}),g=Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"Number of view:"})," ",e.numberOfViews]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"Title:"})," ",e.title]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("b",{children:"Body:"})," ",e.body]}),Object(l.jsx)("div",{children:Object(l.jsx)("b",{children:"Comments to the post:"})}),Object(l.jsx)(u,{props:e.id})]});return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsxs)("div",{className:"card-body",onMouseOver:function(){return localStorage.setItem("currentId",JSON.stringify(e.id))},children:[Object(l.jsx)("h4",{className:"card-title",children:e.title}),Object(l.jsxs)("div",{children:["Number of views: ",e.numberOfViews]}),Object(l.jsx)("button",{className:"btn btn-secondary",onClick:function(){var t;b(!0),j((t=e.id,function(e){for(var n=JSON.parse(localStorage.getItem("posts")),s=0;s<n.length;s++)n[s].id===t&&n[s].numberOfViews++;e({type:y,payload:n}),localStorage.setItem("posts",JSON.stringify(n))})),localStorage.setItem("currentId",JSON.stringify(e.id))},children:"Show more"})]}),n?Object(l.jsxs)("div",{className:"editDeletePostButtons",children:[Object(l.jsx)("button",{className:"btn btn-secondary editPostButton",onClick:function(){f(!1),b(!0)},children:"Edit post"}),Object(l.jsx)("button",{className:"btn btn-secondary deletePostButton",onClick:function(){j(S(JSON.parse(localStorage.getItem("currentId"))))},children:"Delete post"})]}):" ",p?Object(l.jsx)(d,{active:r,setActive:b,children:g}):Object(l.jsx)(d,{active:r,setActive:b,children:v})]})})),w=Object(a.b)((function(t){return{allPosts:t.allData.posts,sortBy:t.allData.sortBy,chosenId:t.allData.chosenId}}))((function(t){var e=t.allPosts,n=t.sortBy,s=t.chosenId;switch(n){case"noSort":return e.map((function(t){return Object(l.jsx)(C,{posts:t},t.id)}));case"byComments":return e.sort((function(t,e){return e.numberOfComments-t.numberOfComments})).map((function(t){return Object(l.jsx)(C,{posts:t},t.id)}));case"byViews":return e.sort((function(t,e){return e.numberOfViews-t.numberOfViews})).map((function(t){return Object(l.jsx)(C,{posts:t},t.id)}));case"byDate":return e.sort((function(t,e){return e.id-t.id})).map((function(t){return Object(l.jsx)(C,{posts:t},t.id)}));case"byId":return e.filter((function(t){return t.userId===s})).map((function(t){return Object(l.jsx)(C,{posts:t},t.id)}));default:return e.map((function(t){return Object(l.jsx)(C,{posts:t},t.id)}))}})),D=Object(a.b)((function(t){return{props:t.allData.posts,isAdmin:t.allData.isAdmin}}))((function(t){t.props;var e=t.isAdmin,n=Object(a.c)(),c=Object(s.useState)(!1),o=Object(i.a)(c,2),r=o[0],b=o[1],u="asd",j="gfdh",m=Date.now,O=1,p=Object(s.useRef)(null);var f=Object(l.jsxs)("div",{className:"adminField col position-relative",children:[Object(l.jsx)("button",{className:"btn btn-secondary addPostButton",onClick:function(){b(!0)},children:"Add post"}),Object(l.jsx)("center",{children:Object(l.jsx)("input",{type:"text","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",className:"form-control col postIdInput",ref:p,onChange:function(t){return O=t.target.value}})}),Object(l.jsx)("button",{className:"btn btn-secondary col sortByIdButton",onClick:function(){parseInt(O)?(n(I("byId",parseInt(O))),p.current.value=""):n(I("noSort"))},children:"Display the posts of chosen user"})]});return Object(l.jsxs)("div",{className:"controlPanel row",children:[Object(l.jsx)("div",{className:"changeUserAccessButton changeAccessDiv",children:Object(l.jsx)("button",{className:"btn btn-secondary col changeAccessButton",onClick:function(){n({type:h})},children:e?"I am guest":"I am admin"})}),e?f:"",Object(l.jsxs)("div",{className:"sortButtonsField row",children:[Object(l.jsx)("div",{className:"sortByComments col",children:Object(l.jsx)("button",{className:"btn btn-secondary sortButton col",onClick:function(){n(I("byComments"))},children:"Sort by the number of comments"})}),Object(l.jsx)("div",{className:"sortByViews col",children:Object(l.jsx)("button",{className:"btn btn-secondary sortButton",onClick:function(){n(I("byViews"))},children:"Sort by the number of views"})}),Object(l.jsx)("div",{className:"sortByDate col",children:Object(l.jsx)("button",{className:"btn btn-secondary sortButton",onClick:function(){n(I("byDate"))},children:"Sort by date"})})]}),Object(l.jsx)(d,{active:r,setActive:b,children:Object(l.jsxs)("div",{className:"addField",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),"Enter author id:"]}),Object(l.jsx)("input",{className:"inputIdField",type:"text",onChange:function(t){return m=t.target.value}}),Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),"Enter new title:"]}),Object(l.jsx)("input",{className:"inputTitleField",type:"text",onChange:function(t){return u=t.target.value}}),Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),"Enter new post body:"]}),Object(l.jsx)("textarea",{className:"inputBodyField",onChange:function(t){return j=t.target.value}}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{className:"btn btn-secondary col confirmButton",onClick:function(){n(N({userId:parseInt(m),id:Date.now(),title:u,body:j,numberOfComments:0,numberOfViews:0})),b(!1)},children:"Confirm"})]})})]})})),B=(n(28),Object(a.b)((function(t){return{props:t.allData}}))((function(){var t=Object(s.useState)(!0),e=Object(i.a)(t,2),n=e[0],c=e[1],o=Object(a.c)();return Object(s.useEffect)((function(){!0===n&&(c(!1),o(function(){var t=Object(O.a)(m.a.mark((function t(e){var n,s,c,o,r,a,i,l,d;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==localStorage.getItem("posts")){t.next=19;break}return t.next=3,fetch("https://jsonplaceholder.typicode.com/posts/");case 3:return n=t.sent,t.next=6,n.json();case 6:return s=t.sent,t.next=9,fetch("https://jsonplaceholder.typicode.com/comments/ ");case 9:return c=t.sent,t.next=12,c.json();case 12:for(o=t.sent,r=0;r<s.length;r++){for(a=0,i=0;i<o.length;i++)o[i].postId===s[r].id&&a++;s[r].numberOfComments=a,s[r].numberOfViews=0}e({type:x,posts:s,comments:o}),localStorage.setItem("posts",JSON.stringify(s)),localStorage.setItem("comments",JSON.stringify(o)),t.next=22;break;case 19:l=JSON.parse(localStorage.getItem("posts")),d=JSON.parse(localStorage.getItem("comments")),e({type:x,posts:l,comments:d});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))})),Object(l.jsxs)("div",{className:"container pt-3",children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)(D,{})})}),Object(l.jsx)("div",{className:"row allPosts",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)(w,{})})})]})}))),E=n(3),A={posts:[{userId:1,id:1,title:"Error!",body:"Posts did not load."}],isAdmin:!1,comments:[{postId:1,id:1,name:"asdasd",email:"sdfxcv",body:"adxcvgfdh"}]},_=Object(r.b)({allData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return Object(E.a)(Object(E.a)({},t),{},{posts:[e.payload].concat(Object(p.a)(t.posts))});case h:return Object(E.a)(Object(E.a)({},t),{},{isAdmin:!t.isAdmin});case x:return Object(E.a)(Object(E.a)({},t),{},{posts:e.posts,comments:e.comments,isAdmin:!1,sortBy:"noSort"});case v:return localStorage.removeItem("posts"),localStorage.setItem("posts",JSON.stringify(t.posts)),Object(E.a)(Object(E.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.payload}))});case y:return Object(E.a)(Object(E.a)({},t),{},{posts:e.payload});case g:return Object(E.a)(Object(E.a)({},t),{},{sortBy:e.payload,chosenId:e.forIdSort});default:return t}}}),k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(e){var n=e.getCLS,s=e.getFID,c=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),s(t),c(t),o(t),r(t)}))},T=n(16),P=Object(r.d)(_,Object(r.c)(Object(r.a)(T.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),J=Object(l.jsx)(a.a,{store:P,children:Object(l.jsx)(B,{})});o.a.render(J,document.getElementById("root")),k()}},[[29,1,2]]]);
//# sourceMappingURL=main.f24ee2a2.chunk.js.map